<!DOCTYPE html>
<html>
  <head>
    <title>Unofficial decoder of RDWorks generated machine code.</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description=" content="Unofficial machine code viewer for
    your RuiDa Laser Controller">
    <link rel="stylesheet" href="ruidaView.css">
  </head>

  <body>
    <div id="top-container" class="container">
      <label class="buttyG"> <input type='file' onchange='openFile(event)'/>
        Open
      </label>
      <div id="myLeftSpan"></div>
      <div id="myRightSpan"></div>
      <button id="infoButt"class="buttyG" type="button" onclick='info();'>i</button>
      <button class="buttyG" type="button" onclick='download();'>Download</button>
    </div>
    <div id="header-container" class="msg-container">
      <div class="header nr">Nr</div>
      <div class="header message">Messages - Type &amp; Data</div>
      <div class="header description"> Short Description</div>
      <div class="header hex"> Raw Hex</div>
    </div>
    <div class="msg-container">
      <textarea id="myNr" class="nr" readonly> </textarea>
      <textarea id="myMessage" class="message">...</textarea>
      <textarea id="myDescription" class="description" readonly> </textarea>
      <textarea id="myHex" class="hex" readonly> </textarea>
    </div>

    <!-- The Download Modal -->
    <div id="myDownloadModal" class="modal">
      <div class="mItem"><span class="close"> &times;</span></div>
      <div id="warning" class="mItem">
        <span id="warningSpan">WARNING</span>
        This is experimental software. <br>
        It can damage you and your machine.<br>
        Use at your own risk.
      </div>
      <div id="dlFile" class="mItem">
        <span>File name:</span>
        <input id="fileName" type="text" required placeholder="default.rd">
        <button class="buttyG" type="button" onclick='downloadReady();'>Save</button>
        <a id="download" href="" type="button" download="default.rd" ></a>
      </div>
    </div>

    <!-- The Info Modal -->
    <div id="myInfoModal" class="modal">
      <div class="mItem">
        <span class="close" onclick="infoClear();"> &times;</span>
      </div>
      <div id="info" class="mItem">
        <h1>Info</h1>
          The application runs in your browser and not on any server.
          Hence, you can run if offline if you like. Download the source at
          <a href="https://github.com/smiilaserpants/RuiDa-Machine-Code"
          target="_blank">GitHub</a>.<br><br>
          This editor is a work in progress. Not every message is known,
          or decoded yet. The Message column is the only part of the viewer
          that’s editable. The idea is to edit the data between the brackets.
          Below you will find what each type of bracket holds.
        <h3>&lt;message&gt;</h3>
        In between the angled brackets you’ll find the message type in hex.
        It is 1-2 bytes long.
        <h3>[value]</h3>
        In between the regular brackets you’ll find the data value. This data
        has been formatted to actual numbers.
        <h3>(raw hex)</h3>
        If you see an indented line enclosed with parentheses. Then the message
        isn't yet decoded. The raw message with header and data will be
        presented with it's hex values in between the parentheses. This data
        can also be edited. If you want to try something out.
      </div>
    </div>
  </body>
  <script src="ruidaModel.js" ></script>
  <script src="ruidaLogic.js" ></script>
</html>
